{% extends "layouts/dashboard_base.html" %}
{% from "components/dashboard/widgets/auditor_stats_grid.html" import auditor_stats_grid with context %}
{% from "components/dashboard/widgets/audit_assignments_table.html" import audit_assignments_table with context %}
{% from "components/dashboard/widgets/compliance_alerts.html" import compliance_alerts with context %}

{% block title %}Auditor Dashboard{% endblock %}

{% block dashboard_content %}

{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
<div class="mb-6">
    {% for category, message in messages %}
    <div class="p-4 mb-4 text-sm rounded-lg {% if category == 'error' %}bg-red-50 text-red-800{% else %}bg-green-50 text-green-800{% endif %}"
        role="alert">
        <span class="font-medium">{{ message }}</span>
    </div>
    {% endfor %}
</div>
{% endif %}
{% endwith %}

<div class="max-w-[1400px] mx-auto flex flex-col gap-6">
    <div class="mb-2">
        <h2 class="text-2xl font-bold text-[#111814] dark:text-white">Auditor Workspace</h2>
        <p class="text-[#618975] dark:text-[#8baaa0]">Welcome back. You have assignments requiring your attention today.
        </p>
    </div>

    <!-- Stats Grid -->
    {{ auditor_stats_grid() }}

    <!-- My Assignments Section -->
    {{ audit_assignments_table() }}

    <!-- Compliance Alerts Panel -->
    {{ compliance_alerts() }}
</div>

{% endblock %}