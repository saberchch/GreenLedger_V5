{#
    Dashboard Sidebar Component
    
    Parameters:
    - nav_items: List of navigation items with structure:
        {
            'icon': 'material_symbol_name',
            'text': 'Display Text',
            'url': 'route_name',
            'active': True/False (optional)
        }
    - plan_info: Dictionary with plan usage info (optional):
        {
            'plan_name': 'Pro',
            'usage_percent': 75,
            'usage_text': '75% of monthly tokens used'
        }
    - logo_url: URL for logo image (optional)
#}

{% set nav_items = nav_items|default([]) %}
{% set plan_info = plan_info|default({
    'plan_name': 'Pro',
    'usage_percent': 75,
    'usage_text': '75% of monthly tokens used'
}) %}
{% set logo_url = logo_url|default('https://lh3.googleusercontent.com/aida-public/AB6AXuC24C8wt9544Ea5vC1Tr3sTOrTYXHwf5yghvXIb3-YR6zZ9__x5p7DLu5CGX0CwqJpfeICes90MHEq46o8HPJKqbNVSH314JOgvghJS2vBklAllLBAKDU5XTG7Py1DRxtPSRaHZ4MVdaPSKpl8Qn3ZhXt5S2tWJA0SjW-RssbpGnmdv9qOPkt29w4jbf1q0OCSYQDeY16tFTsEQBHZA9jKd5hh_T8lcn7fIFV6LCkO3j36YusGm-_J7kDeDYQRZs887_ResNrJZG9t3') %}

<aside class="w-64 flex-shrink-0 flex flex-col bg-white dark:bg-[#1a2c24] border-r border-[#f0f4f2] dark:border-[#2a4035] h-full overflow-y-auto z-20">
    <!-- Logo Section -->
    <div class="p-6">
        <div class="flex items-center gap-3">
            <div class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10 shadow-sm" 
                 data-alt="Abstract green leaf logo on white background" 
                 style='background-image: url("{{ logo_url }}");'></div>
            <div class="flex flex-col">
                <h1 class="text-[#111814] dark:text-white text-base font-bold leading-normal">GreenLedger</h1>
                <p class="text-[#618975] dark:text-[#8baaa0] text-xs font-normal leading-normal">Carbon Accounting</p>
            </div>
        </div>
    </div>
    
    <!-- Navigation -->
    <nav class="flex flex-col gap-2 px-4 flex-1">
        {% for item in nav_items %}
            {% if item.get('divider') %}
                <div class="my-2 border-t border-[#f0f4f2] dark:border-[#2a4035]"></div>
            {% else %}
                {% set is_active = item.get('active', False) %}
                {% if item.get('url') %}
                    {% set nav_url = url_for(item.url) if item.url else '#' %}
                    <a class="flex items-center gap-3 px-3 py-2 rounded-lg {% if is_active %}bg-primary/20 dark:bg-primary/10 border border-primary/10 dark:border-primary/5{% else %}hover:bg-[#f0f4f2] dark:hover:bg-[#23352c]{% endif %} transition-colors group" 
                       href="{{ nav_url }}">
                        <span class="material-symbols-outlined {% if is_active %}text-[#111814] dark:text-primary{% else %}text-[#618975] dark:text-[#8baaa0] group-hover:text-[#111814] dark:group-hover:text-white{% endif %}" 
                              style="font-size: 24px;">{{ item.icon }}</span>
                        <p class="{% if is_active %}text-[#111814] dark:text-white{% else %}text-[#618975] dark:text-[#8baaa0] group-hover:text-[#111814] dark:group-hover:text-white{% endif %} text-sm font-medium leading-normal">{{ item.text }}</p>
                    </a>
                {% else %}
                    <div class="flex items-center gap-3 px-3 py-2 rounded-lg {% if is_active %}bg-primary/20 dark:bg-primary/10 border border-primary/10 dark:border-primary/5{% else %}hover:bg-[#f0f4f2] dark:hover:bg-[#23352c]{% endif %} transition-colors group cursor-pointer">
                        <span class="material-symbols-outlined {% if is_active %}text-[#111814] dark:text-primary{% else %}text-[#618975] dark:text-[#8baaa0] group-hover:text-[#111814] dark:group-hover:text-white{% endif %}" 
                              style="font-size: 24px;">{{ item.icon }}</span>
                        <p class="{% if is_active %}text-[#111814] dark:text-white{% else %}text-[#618975] dark:text-[#8baaa0] group-hover:text-[#111814] dark:group-hover:text-white{% endif %} text-sm font-medium leading-normal">{{ item.text }}</p>
                    </div>
                {% endif %}
            {% endif %}
        {% endfor %}
    </nav>
    
    <!-- Plan Usage Section -->
    {% if plan_info %}
    <div class="p-4">
        <div class="rounded-lg bg-[#f0f4f2] dark:bg-[#23352c] p-4 flex flex-col gap-2">
            <div class="flex items-center justify-between">
                <span class="text-xs font-semibold text-[#111814] dark:text-white">Plan Usage</span>
                <span class="text-xs text-[#618975] dark:text-[#8baaa0]">{{ plan_info.plan_name }}</span>
            </div>
            <div class="h-1.5 w-full bg-[#dbe6e0] dark:bg-[#3d5348] rounded-full overflow-hidden">
                <div class="h-full bg-primary rounded-full" style="width: {{ plan_info.usage_percent }}%"></div>
            </div>
            <p class="text-xs text-[#618975] dark:text-[#8baaa0]">{{ plan_info.usage_text }}</p>
        </div>
    </div>
    {% endif %}
</aside>
