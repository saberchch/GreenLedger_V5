{% macro kpi_card(title, value, unit='', change='', trend='', icon='cloud') %}
<div
    class="flex flex-col p-5 bg-white dark:bg-[#1a2c24] rounded-xl border border-[#e5e7eb] dark:border-[#2a4035] shadow-sm hover:shadow-md transition-shadow">
    <div class="flex justify-between items-start mb-2">
        <span class="text-[#618975] dark:text-[#8baaa0] text-sm font-medium">{{ title }}</span>
        <span class="p-1.5 rounded-md bg-[#f0f4f2] dark:bg-[#23352c] text-[#111814] dark:text-white">
            <span class="material-symbols-outlined" style="font-size: 20px;">{{ icon }}</span>
        </span>
    </div>
    <div class="mt-auto">
        <span class="text-2xl font-bold text-[#111814] dark:text-white block">
            {{ value }}
            {% if unit %}<span class="text-sm font-normal text-[#618975] dark:text-[#8baaa0]">{{ unit }}</span>{% endif
            %}
        </span>
        {% if change %}
        <div class="flex items-center gap-1 mt-1">
            {% if trend == 'down' %}
            <span class="material-symbols-outlined text-primary" style="font-size: 16px;">trending_down</span>
            <span class="text-primary text-xs font-bold">{{ change }}</span>
            {% elif trend == 'up' %}
            <span class="material-symbols-outlined text-red-500" style="font-size: 16px;">trending_up</span>
            <span class="text-red-500 text-xs font-bold">{{ change }}</span>
            {% else %}
            <span class="material-symbols-outlined text-[#618975]" style="font-size: 16px;">remove</span>
            <span class="text-[#618975] dark:text-[#8baaa0] text-xs font-bold">{{ change }}</span>
            {% endif %}
            <span class="text-[#618975] dark:text-[#8baaa0] text-xs ml-1">{{ caller() if caller else 'vs last period'
                }}</span>
        </div>
        {% endif %}
    </div>
</div>
{% endmacro %}