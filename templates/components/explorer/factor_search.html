<form
  class="flex flex-col sm:flex-row gap-3 w-full max-w-2xl"
  method="get"
  action=""
>
  <!-- Keyword Search -->
  <div class="relative flex-1">
    <span class="material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-[#618975]">
      search
    </span>
    <input
      type="text"
      name="q"
      value="{{ request.args.get('q', '') }}"
      placeholder="Search activity, fuel, material, process..."
      class="w-full pl-10 pr-4 py-2.5 rounded-lg border border-[#dbe6e0] bg-[#f6f8f7] text-sm
             focus:outline-none focus:ring-2 focus:ring-primary"
    />

    <!--
      TODO (backend):
      - Apply LIKE / fuzzy search on CSV-backed emission factors
      - Search across: activity_name, category, description, unit
    -->
  </div>

  <!-- Category Filter -->
  <select
    name="category"
    class="rounded-lg border border-[#dbe6e0] bg-[#f6f8f7] text-sm px-3 py-2.5
           focus:outline-none focus:ring-2 focus:ring-primary"
  >
    <option value="">All Categories</option>

    <!-- TODO: populate dynamically from CSV unique categories -->
    <!-- {% for category in categories %} -->
    <option value="energy">Energy</option>
    <option value="transport">Transport</option>
    <option value="industry">Industry</option>
    <option value="agriculture">Agriculture</option>
    <!-- {% endfor %} -->
  </select>

  <!-- Scope Filter -->
  <select
    name="scope"
    class="rounded-lg border border-[#dbe6e0] bg-[#f6f8f7] text-sm px-3 py-2.5
           focus:outline-none focus:ring-2 focus:ring-primary"
  >
    <option value="">All Scopes</option>
    <option value="1">Scope 1</option>
    <option value="2">Scope 2</option>
    <option value="3">Scope 3</option>

    <!--
      TODO:
      - Map CSV column "scope" or inferred scope
      - Some factors may belong to multiple scopes
    -->
  </select>

  <!-- Submit -->
  <button
    type="submit"
    class="bg-primary text-[#102219] font-bold px-5 py-2.5 rounded-lg text-sm
           hover:opacity-90 transition"
  >
    Search
  </button>

  <!-- Reset -->
  <a
    href="{{ request.path }}"
    class="px-4 py-2.5 text-sm font-medium rounded-lg border border-[#dbe6e0]
           bg-white hover:bg-[#f6f8f7] text-center"
  >
    Reset
  </a>

</form>
